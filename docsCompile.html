<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SimVascular Docs</title>

    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" />

    <link href="css/shop-item.css" rel="stylesheet" type="text/css" />

    <link href="css/codestyle.css" rel="stylesheet" type="text/css" />

    <link rel="stylesheet" href="font-awesome-4.1.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css">

    <link rel="shortcut icon" href="img/favicon.ico">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                <i class="fa fa-bars" id="barIcon"></i>
              </button>
                <a class="navbar-brand" id="brandName" href="index.html">
                  <img src="img/svlogo/svLogoSmallText.png" alt="...">
                </a>
                <a class="navbar-brand page-scroll">
                3.0
                </a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">

                  <!-- USER GUIDES -->
                  <li>
                    <a href="#" id="dropdownMenu1" data-toggle="dropdown">
                      <b><span class="fa fa-user"></span> User Guides</b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsInstallation.html"><b><span class="fa fa-sign-in fa-rotate-90"></span> Installation</b></a></li>
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsQuickGuide.html"><b><span class="icon ion-ios7-bolt"></span> Quick Guide</b></a></li>
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsModelGuide.html"><b><span class="icon ion-settings"></span> Modeling</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsMeshing.html"><b><span class="icon ion-ios7-keypad"></span> Meshing</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsFlowSolver.html"><b><span class="icon ion-play"></span> Simulation</b></a></li>
                    </ul>
                  </li>

                  <!-- CLINCAL CASES -->
                  <li>
                    <a href="#" id="dropdownMenu1" data-toggle="dropdown">
                      <b><i class="fa fa-stethoscope"></i> Clinical Cases</b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="clinicalCase1.html"><b><span class="fa fa-user-md"></span> Aortofemoral Normal (Case 1)</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="clinicalCase2.html"><b><span class="fa fa-user-md"></span> Aortofemoral Normal (Case 2)</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="clinicalCase3.html"><b><span class="fa fa-user-md"></span> Coronary Normal (Case 3)</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="clinicalCase4.html"><b><span class="fa fa-user-md"></span> Healthy Pulmonary (Case 4)</b></a></li>
                    </ul>
                  </li>

                  <!-- DEVELOPER GUIDES -->
                  <li>
                    <a href="#" id="dropdownMenu1" data-toggle="dropdown">
                      <b><span class="fa fa-caret-square-o-right"></span> Developer Guides</b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsCompile.html"><b><span class="fa fa-file-text-o"></span> Compile Sources</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsCodeSnippets.html"><b><span class="fa fa-indent"></span> Code Snippets</b></a></li>
                    </ul>
                  </li>

                  <!-- svCOMMUNITY -->
                  <li>
                    <a href="#" id="dropdownMenu1" data-toggle="dropdown">
                      <b><i class="fa fa-users"></i> svCommunity</b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://simtk.org/forums/viewforum.php?f=188"><b><span class="fa fa-users"></span> Public Forum</b></a></li>
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://simtk.org/mailman/listinfo/simvascular-users"><b><span class="fa fa-sign-in"></span> Join User Mailing List</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://simtk.org/pipermail/simvascular-users/"><b><span class="fa fa-pencil-square-o"></span> User Mailing List Archive</b></a></li>
                    </ul>
                  </li>

                  <!-- REFERENCES -->
                  <li>
                    <a href="docsRefs.html" id="dropdownMenu1" >
                      <b><span class="icon ion-document-text"></span>References</b>
                    </a>
                  </li>

                    <!-- <li><a href="docsQuickGuide.html" id="btnQuickGuide"><b><span class="icon ion-ios7-bolt"></span> Quick Guide</b></a></li>
                    <li><a href="docsModelGuide.html" id="btnModelGuide"><b><span class="icon ion-settings"></span> Modeling</b></a></li>

                    <li><a href="docsMeshing.html" id="btnMeshing"><b><span class="icon ion-ios7-keypad"></span> Meshing</b></a></li>
                    <li><a href="docsPresolver.html" id="btnPresolver"><b><span class="icon ion-log-in"></span> svPre</b></a></li>
                    <li><a href="docsFlowSolver.html" id="btnFlowSolver"><b><span class="icon ion-play"></span> svSolver</b></a></li>
                    <li><a href="docsRefs.html" id="btnRefs"><b><span class="icon ion-document-text"></span> References</b></a></li>
                    <li><a href="clinicalCase1.html" id="btnRefs"><b>Case Studies</b></a></li> -->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <!--Nav Bar -->
<div class="row">
    <div class="col-xs-1 col-sm-1 hidden-md hidden-lg">
    </div>
    <!-- ONE COLUMN OF SPACE -->
    <nav class="hidden-xs hidden-sm col-md-2 col-lg-2 bs-docs-sidebar">


        <ul id="sidebar" class="nav nav-stacked fixed manSource"> <!--Nav Bar -->
<p><h3>Compile</h3></p>
<li><a href="#compileRequirements">System Requirements</a></li>
<li><a href="#sysSetupWin">Required Libraries</a>
	<ul class="nav nav-stacked">
		<li><a href="#sysSetupWin">Windows</a></li>
		<li><a href="#sysSetupMac">Apple OS X</a></li>
		<li><a href="#sysSetupLinux">Linux</a></li>
	</ul>
<li><a href="#compileBuild">Steps for Compiling</a>
<li><a href="#compileRun">Running Simvascular</a>
<li><a href="#compileITKVTK">ITK and VTK</a></ul>








    </nav>

    <!--Main Content -->
    <div class="col-xs-10 col-sm-10 col-md-9 col-lg-9" id="manualContent">

      <!-- ACTUAL CONTENT -->


        <div class="manCompile"><section id="compileRequirements" class="group"><h1>Compiling SimVascular using CMake</h1>

<p><br>
<em>This guide gives an overview of compiling SimVascular using CMake.  We also support standard MakeFiles.</em></p>

<p><br></p>

<h2>System Requirements</h2>

<table class="table table-bordered">
<thead>
<tr>
  <th>Windows</th>
  <th>Apple OS X</th>
  <th>Linux</th>
</tr>
</thead>
<tr>
  <td>Tested Configurations:
        <ul>
          <li>Windows 10</li>
          <li>C++ compilers</li>
        </ul>
    Supported Compilers:
      <ul>
      <li>Visual Studio 2013 Community Edition <br>(version 12.0 update 5 for x64)</li>
      <li>Visual Studio 2013 Professional <br>(version 12.0 update 5 for x64)</li>
    </ul>
  </td>
  <td>Tested Configurations:
        <ul>
          <li>Version 10.10.5 (OS X Yosemite) <br>with XCode 7.2.1 (command line tools installed)</li>
          <li>Version 10.12.1 (macOS Sierra) <br>with XCode 8.2.1 (command line tools installed)</li>
        </ul>
    Supported Compilers:
      <ul>
      <li>Apple LLVM version 7.0.2 (clang-700.1.81)</li>
      <li>Apple LLVM version 8.0.0 (clang-800.0.42.1)</li>
    </ul>
  </td>
  <td>Tested Configurations:
        <ul>
          <li>Ubuntu 14.04 64-bit desktop</li>
          <li>Ubuntu 16.04 64-bit desktop</li>
        </ul>
    Supported Compilers:
      <ul>
      <li>gcc/g++ 4.8.5</li>
      <li>gcc/g++ 5.4.0</li>
    </ul>
  </td>
</tr>
</table>

<p><em>On linux, use <code>gcc --version</code> to see which compiler you are using.</em></p>
<p><em>On mac, use <code>clang --version</code> to see which compiler you are using.</em></p>

<p><em>XCode&rsquo;s tools and libraries are required but compiling with XCode is currently <strong>unsupported.</strong></em></p>
</section>
<section id="buildInfo" class="subgroup"><h2>Building Help</h2>
  <p>Building SimVascular can be thought of as building two separate projects:
    <li>SimVascular's externals</li>
    <li>SimVascular itself</li>
  </p>
  SimVascular Source:
		<p>
		 <pre class="highlight plaintext">
<code>--- CMakeLists.txt - <ul><em>Highest level CMake file that contains very little. Simply builds the Externals project and then the SimVascular project. Should be the entrance location for anyone familiarizing themselves with SimVascular.</em></ul>
<font color="##0000FF">Externals</font>
<ul>--- CMakeLists.txt - <ul><em>Main CMake file for Externals. Very involved and contains options to use different versions of the externals, to build or download certain externals, etc. Many of these options are not available using the highest level CMake file, so if fine tuning of the Externals is desired, this is the spot to be :)</em></ul></ul>
<font color="##0000FF">Code</font>
<ul>--- CMakeLists.txt - <ul><em>Main CMake file for SimVascular. Very involved and contains options for building/not building certain libraries, shared/static libraries, etc. Many of these options are also not available using the highest level CMake file, so if fine tuning of the SimVascular build is desirec, this is the spot to be :)</em></ul></ul>
<font color="##0000FF">... Remaining Src</font></code></pre>
		</p>
  <p>
   <h3>Building it all</h3>
   <p>This is the easiest and most basic way to build SimVascular. If using a supported operating system and compiler, this is likely to work.
     <li>Follow the setup instructions for <a href="#sysSetupMac">Mac</a>, <a href="#sysSetupLinux">Linux</a>, or <a href="#sysSetupWin">Windows</a>.</li>
     <li>Use git to clone the SimVascular source:</li>
     <pre class="highlight plaintext"><code>git clone https://github.com/SimVascular/SimVascular.git SimVascularSrc</code></pre>
     <li>Or fork the project on <a href="https://github.com/SimVascular/SimVascular">github</a>, and then clone the forked repository:</li>
     <pre class="highlight plaintext"><code>git clone https://github.com/github_username/SimVascular.git SimVascularSrc</code></pre>
     <li>Enter the source and setup the project:</li>
     <pre class="highlight plaintext"><code>cd SimVascularSrc
mkdir Build
ccmake ..</code></pre>
     <li>Configure the project with 'c'. This will error because it needs Qt. Point it to the location of the Qt5Config.cmake file:</li>
     <pre class="highlight plaintext"><code><img src="img/svlogo/svLogoSmallText.png" alt="..."></code></pre>
     <li>Reconfigure the project with 'c' until you can generate make files with 'g'. If you see warnings, please read them. It may be the case that your system does not have pre-built binaries of the externals. In which case, a default version of the pre-built externals will be download; however, it could cause errors when finally building the SimVascular project.</li>
     <li>If you have no errors, generate the make files with 'g'.</li>
     <li>Build the project:</li>
     <pre class="highlight plaintext"><code>make</code></pre>
     <li>First, the externals will be downloaded and then SimVascular will be automatically configured to build with these pre-built downloaded externals.</li>
     <li>If the build errors during the download of the externals, see the section about the <a href="#buildExternals">Externals</a>. If the build errors durign the actual build SimVascular, see the section about building <a href="#buildSimVascular">standalone SimVascular</a></li>
     <li>If the build did not error, navigate to the SimVascular build directory and launch the project!</li>
     <pre class="highlight plaintext"><code>cd SimVascular-build
./mysim -qt</code></pre>
   </p>
   <p>
   <h3 id="buildExternals">Building SimVascular's Externals</h3>
   SimVascular depends directly on 7 major open source libraries:
   <ol>
     <li><a href="https://www.tcl.tk">Tcl/Tk</a></li>
     <li><a href="https://www.python.org">Python</a></li>
     <li><a href="https://www.freetype.org">FreeType</a></li>
     <li><a href="http://gdcm.sourceforge.net/wiki/index.php/Main_Page">GDCM</a></li>
     <li><a href="https://itk.org">ITK</a></li>
     <li><a href="http://www.vtk.org">VTK</a></li>
     <li><a href="https://www.mmgtools.org">MMG</a></li>
     <li><a href="https://www.opencascade.com">OpenCASCADE</a></li>
     <li><a href="http://mitk.org/wiki/MITK">MITK</a></li>
   </ol>
   Building all of these dependencies can take quite a while; thus, pre-built
   binaries are provided for the supported operating systems. We will discuss how to
   to build these in section TODO FILLL.
   </p>
   <p>
   <h3 id="buildSimVascular">Building Standalone SimVascular</h3>
   </p>
</section><!-- end buildInfo -->
<section id="sysSetupWin" class="subgroup"><h2>System Setup</h2>

<h3>Windows</h3>

<p>You need to install:
<ul>
<li>CMake, Visit <a href="http://www.cmake.org/"target="_blank"> cmake.org</a> for details</li>
<li><a href="http://www.visualstudio.com/"target="_blank"> Microsoft Visual Studio</a> (with x64 compilers)</li>
</ul></p>
</section>
<section id="sysSetupMac" class="subgroup"><h3>Apple OS X</h3>

<p>To install CMake on OS X visit <a href="http://www.cmake.org/"target="blank"> cmake.org</a> for details</p>
<p>Make sure you have XCode XCODEEEEE TODODOD</p>
<p>Install Qt QTTTT TODOOO</p>


<br></p>

<p>The Xcode comman line tools need to be installed. This can done with this command:</p>
<pre class="highlight plaintext"><code>xcode-select --install
</code></pre>

<h5>The following libraries and tools should be installed using MacPorts:</h5>

<p>Build Tools:</p>
<pre class="highlight plaintext"><code>sudo port install gcc46
</code></pre>

<p>For svSolver, svPre, and svPost (Optional):</p>
<pre class="highlight plaintext"><code>sudo port install gfortran
sudo port install mpich-gcc46
</code></pre>

<p>Plugin Libraries (Optional):</p>
<pre class="highlight plaintext"><code>sudo port install glib2-devel
sudo port install pkgconfig
</code></pre>
</section>
<section id="sysSetupLinux" class="subgroup"><h3>Linux</h3>

<p>You will need the following packages, available from the APT repository:</p>
<pre class="highlight plaintext"><code>sudo apt-get install cmake
sudo apt-get install cmake-curses-gui
sudo apt-get install cmake-gui
</code></pre>

<p>Build Tools (Fortran is optional):</p>
<pre class="highlight plaintext"><code>sudo apt-get install gcc-multilib build-essential g++ gfortran
</code></pre>

<p>Tcl/Tk:</p>
<pre class="highlight plaintext"><code>sudo apt-get install tcl8.5 tcl8.5-dev tcl8.5-lib tcllib
sudo apt-get install tk8.5 tk8.5-dev tk8.5-lib tklib
</code></pre>

<p>For flowsolver:</p>
<pre class="highlight plaintext"><code>sudo apt-get install libmpich2-dev
</code></pre>

<p>DICOM: </p>
<pre class="highlight plaintext"><code>sudo apt-get install dcmtk
sudo apt-get install libgdcm-tools
</code></pre>

<p>For VTK:</p>
<pre class="highlight plaintext"><code>sudo apt-get install libglu1-mesa-dev libxt-dev libgl1-mesa-dev
</code></pre>

<p>Plugin Libraries (Optional):</p>
<pre class="highlight plaintext"><code>sudo apt-get install glib2.0-dev
</code></pre>
</section>
<section id="compileRun" class="group"><h2>Running SimVascular</h2>

<p>To run SimVascular and other executables you need to run these scripts which will set up the environmnet variables and start the executable. These scripts should be run from the top level of the build directory:</p>

<table class="table table-bordered">
<thead>
<tr>
  <th>Executable</th>
  <th>Linux/OSX Script</th>
  <th>Windows Script</th>
</tr>
</thead>
<tr>
  <td>SimVascular</td>
  <td>mysim</td>
  <td>mysim.bat</td>
</tr>
<tr>
  <td>svSolver</td>
  <td>mysolver</td>
  <td>mysolver.bat</td>
</tr>
<tr>
  <td>svAdapt</td>
  <td>myadapt</td>
  <td>myadapt.bat</td>
</tr>
<tr>
  <td>svTetAdapt</td>
  <td>mytetadapt</td>
  <td>mytetadapt.bat</td>
</tr>
<tr>
  <td>svPost</td>
  <td>mypost</td>
  <td>mypost.bat</td>
</tr>
</table>
</section>
<section id="compileITKVTK" class="group"><h2>Compiling with Local VTK/ITK Builds</h2>

<h4>VTK</h4>

<p>On some systems particular verisions of vtk\itk with the needed settings
will not build correctly with gcc4.4 or gcc4.8. It is reccomended that
you obtain and install gcc-4.6.  There is a helpful guide in this readme
to get you started.</p>

<p>You may get these from source or use the SV<em>thirdparty</em>svn</p>

<p>The following settings are required when building VTK on your own:</p>

<ul>
<li>BUILD_SHARED_LIBS OFF</li>
<li>BUILD_TESTING OFF</li>
<li>VTK_Group_Tk ON</li>
<li>VTK_WRAP_TCL ON</li>
</ul>

<p><strong>Note</strong>: Different versions of VTK have slightly different CMake Variable names.</p>

<p>It is important to build VTK with static libraries, You need to wrap Tcl and Tk. </p>

<p>Lastly, Rendering Tk is also important (this may be in VTK_Group_Rendering, depending on your verison)</p>

<p>We reccomend using VTK 6.0.0.  SimVascular does not compile using VTK 6.1.0 yet.</p>

<h4>ITK (Optional)</h4>

<p>ITK will need these settings if building on your own:</p>

<ul>
<li>BUILD_SHARED_LIBS OFF</li>
<li>BUILD_TESTING OFF</li>
<li>Module_ITKVtkGlue ON</li>
<li>ITK_Review ON</li>
</ul>

<p>You also must ensure that the VTK_DIR from above. We reccomend using ITK 4.5.0</p>

<h2>Linux: Multiple Compilers</h2>

<p>Some versions of the needed software do not compile correctly using certain
versions of gcc/g++.  We use gcc-4.6 to compile many of the external libraries.
It is easy to obtain gcc-4.6 without overwriting your current version using
update-alternatives.  Below is an example of how to install both gcc-4.6 and
gcc-4.8 on a ubuntu system.</p>
<pre class="highlight shell"><code>apt-get install c++-4.6 c++-4.8

update-alternatives --remove-all gcc
update-alternatives --remove-all g++

update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 10
update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 20

update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.6 10
update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 20

update-alternatives --install /usr/bin/cc cc /usr/bin/gcc 30
update-alternatives --set cc /usr/bin/gcc

update-alternatives --install /usr/bin/c++ c++ /usr/bin/g++ 30
update-alternatives --set c++ /usr/bin/g++

update-alternatives --config gcc
update-alternatives --config g++
</code></pre>

<h2>OS X: Installing MacPorts, gcc46, MPI</h2>

<p>If you get the Macports versions of GNU compilers you&rsquo;ll need the matching
MPI installation.</p>

<p>Install macports from <a href="https://www.macports.org/"target="blank"> macports.org</a></p>
<pre class="highlight plaintext"><code>sudo port install gcc46
sudo port install mpich-gcc46
</code></pre>

<p><br>
<br>
<br>
<br></p>
</section></div>








    </div>
</div>


    <!-- /.container -->
    <nav class="navbar navbar-default navbar-fixed-bottom">
        <div class="container-fluid text-center">
          <ul class="nav navbar-nav">
            <li><a>Copyright &copy; SimVascular Development Team - 2017</a></li>
          </ul>
        </div>
        <!-- /.container -->
    </nav>


    <script src="js/jquery-1.11.0.js" type="text/javascript"></script><script src="js/bootstrap.min.js" type="text/javascript"></script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
      $('body').scrollspy({
        target: '.bs-docs-sidebar',
        offset: 40
      });
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-55333921-1', 'auto');
      ga('send', 'pageview');
    </script>

    <script type="text/javascript"
      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

</body>

</html>
